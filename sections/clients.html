<!-- 
  =================================
  Ù…Ø§Ú˜ÙˆÙ„: Ù…Ø´ØªØ±ÛŒØ§Ù† Ù…Ø§ (Clients / Partners)
  =================================
  Ø´Ø§Ù…Ù„: 
  - Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ù„ÙˆÚ¯ÙˆÛŒ Ù…Ø´ØªØ±ÛŒØ§Ù† Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Ú†Ø±Ø®Ø´ Ø¨ÛŒâ€ŒÙ¾Ø§ÛŒØ§Ù† (Infinite Loop)
  - Ù†Ù…Ø§ÛŒØ´ Ø±Ù†Ú¯ÛŒ ØªØµØ§ÙˆÛŒØ± Ø¯Ø± Ø®Ø±ÙˆØ¬ÛŒ
  - ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØ§ ÛµÛ° Ú©ÛŒÙ„ÙˆØ¨Ø§ÛŒØª
  - Ù…Ø®ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Ú©Ø§Ø¯Ø±Ù‡Ø§ Ø¯Ø± Ø®Ø±ÙˆØ¬ÛŒ
-->
<section class="section" id="section-UNIQUE_ID" data-section="clients">
    <!-- Ù‡Ù†Ø¯Ù„ Ø¬Ø§Ø¨Ø¬Ø§ÛŒÛŒ -->
    <div class="drag-handle">
        <i class="fas fa-arrows-alt-v"></i>
    </div>
    
    <!-- Ø¹Ù†ÙˆØ§Ù† Ø³Ú©Ø´Ù† (Ù…Ø®ØµÙˆØµ Ø§Ø¯Ù…ÛŒÙ†) -->
    <div class="section-title">
        <div class="section-title-text" contenteditable="true">Ù…Ø´ØªØ±ÛŒØ§Ù† Ù…Ø§</div>
        <div class="delete-section" onclick="deleteSection('section-UNIQUE_ID')">ğŸ—‘ï¸</div>
    </div>
    
    <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
    <div class="section-content">
        <p class="clients-desc" contenteditable="true">Ø§ÙØªØ®Ø§Ø± Ù‡Ù…Ú©Ø§Ø±ÛŒ Ø¨Ø§ Ø¨Ø±Ù†Ø¯Ù‡Ø§ÛŒ Ù…Ø¹ØªØ¨Ø±</p>
        
        <div class="clients-wrapper">
            <!-- Ø¯Ú©Ù…Ù‡ Ù†Ø§ÙˆØ¨Ø±ÛŒ Ø±Ø§Ø³Øª -->
            <button class="clients-nav next" id="next-btn-UNIQUE_ID"><i class="fas fa-chevron-right"></i></button>
            
            <div class="clients-slider-container" id="slider-container-UNIQUE_ID">
                <div class="clients-track" id="track-UNIQUE_ID">
                    <!-- Ú©Ø§Ø±Øª Ù†Ù…ÙˆÙ†Ù‡ -->
                    <div class="client-card">
                        <div class="client-logo-wrapper" title="ØªØºÛŒÛŒØ± Ù„ÙˆÚ¯Ùˆ">
                            <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text x='50' y='50' text-anchor='middle' dominant-baseline='middle' fill='%23aaa' font-size='14'>LOGO</text></svg>" class="client-img" alt="Client Logo">
                            <div class="upload-overlay"><i class="fas fa-camera"></i></div>
                            <input type="file" accept="image/*" class="client-file-input" style="display: none;">
                        </div>
                        <h4 contenteditable="true" class="client-name">Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ</h4>
                        <button class="btn-delete-client" title="Ø­Ø°Ù">&times;</button>
                    </div>
                </div>
            </div>

            <!-- Ø¯Ú©Ù…Ù‡ Ù†Ø§ÙˆØ¨Ø±ÛŒ Ú†Ù¾ -->
            <button class="clients-nav prev" id="prev-btn-UNIQUE_ID"><i class="fas fa-chevron-left"></i></button>
        </div>

        <!-- Ø¯Ú©Ù…Ù‡ Ø§ÙØ²ÙˆØ¯Ù† (Ù…Ø®ØµÙˆØµ Ø§Ø¯Ù…ÛŒÙ†) -->
        <div class="clients-controls">
            <button class="btn-add-client" id="add-client-UNIQUE_ID">
                <i class="fas fa-plus-circle"></i> Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø´ØªØ±ÛŒ Ø¬Ø¯ÛŒØ¯
            </button>
        </div>
    </div>

    <style>
        #section-UNIQUE_ID .clients-desc {
            text-align: center;
            margin-bottom: 20px;
            opacity: 0.8;
        }

        #section-UNIQUE_ID .clients-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #section-UNIQUE_ID .clients-slider-container {
            width: 100%;
            overflow: hidden; 
            position: relative;
            padding: 10px 0;
            /* Ù…Ø§Ø³Ú© Ù…Ø­Ùˆ Ø´Ø¯Ù† Ø¯Ø± Ù„Ø¨Ù‡â€ŒÙ‡Ø§ */
            mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
        }

        #section-UNIQUE_ID .clients-track {
            display: flex;
            gap: 30px;
            padding: 10px 20px;
            /* Ø­Ø°Ù ØªØ±Ù†Ø²ÛŒØ´Ù† Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚ Ø¨Ø§ JS */
            width: max-content;
            align-items: center;
        }

        #section-UNIQUE_ID .client-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 15px;
            width: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        #section-UNIQUE_ID .client-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        #section-UNIQUE_ID .client-logo-wrapper {
            width: 90px;
            height: 90px;
            background: transparent; 
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
            cursor: pointer;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)); 
        }

        #section-UNIQUE_ID .client-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        #section-UNIQUE_ID .upload-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex; align-items: center; justify-content: center;
            color: white;
            opacity: 0;
            transition: opacity 0.3s;
            border-radius: 50%;
        }

        #section-UNIQUE_ID .client-logo-wrapper:hover .upload-overlay {
            opacity: 1;
        }

        #section-UNIQUE_ID .client-name {
            font-size: 0.9rem;
            text-align: center;
            margin: 0;
            width: 100%;
            outline: none;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #section-UNIQUE_ID .btn-delete-client {
            position: absolute;
            top: -8px;
            left: -8px;
            background: #ff6b6b;
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.2s;
            z-index: 10;
        }

        #section-UNIQUE_ID .client-card:hover .btn-delete-client {
            opacity: 1;
            top: 5px;
            left: 5px;
        }

        #section-UNIQUE_ID .clients-controls {
            text-align: center;
            margin-top: 20px;
        }

        #section-UNIQUE_ID .btn-add-client {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s;
        }

        #section-UNIQUE_ID .btn-add-client:hover {
            background: var(--primary-color);
        }

        #section-UNIQUE_ID .clients-nav {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            border: 1px solid var(--glass-border);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 5;
            flex-shrink: 0;
        }

        #section-UNIQUE_ID .clients-nav:hover {
            background: var(--primary-color);
            color: white;
        }

        /* --- Visitor Mode Styles --- */
        
        body.visitor-mode #section-UNIQUE_ID .section-title,
        body.visitor-mode #section-UNIQUE_ID .drag-handle,
        body.visitor-mode #section-UNIQUE_ID .delete-section,
        body.visitor-mode #section-UNIQUE_ID .btn-delete-client,
        body.visitor-mode #section-UNIQUE_ID .clients-controls,
        body.visitor-mode #section-UNIQUE_ID .upload-overlay {
            display: none !important;
        }

        body.visitor-mode #section-UNIQUE_ID {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            backdrop-filter: none !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
        }

        body.visitor-mode #section-UNIQUE_ID .client-card {
            pointer-events: none;
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
        }
        
        /* Ù†Ù…Ø§ÛŒØ´ Ø±Ù†Ú¯ÛŒ Ø¯Ø± Ø®Ø±ÙˆØ¬ÛŒ (ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø³ÛŒØ§Ù‡ Ùˆ Ø³ÙÛŒØ¯ Ø­Ø°Ù Ø´Ø¯Ù†Ø¯) */
        body.visitor-mode #section-UNIQUE_ID .client-logo-wrapper {
            pointer-events: none;
            filter: none; /* Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø±Ù†Ú¯ÛŒ Ø¨ÙˆØ¯Ù† */
            opacity: 1;
        }
    </style>

    <script>
        (function() {
            const uid = 'UNIQUE_ID';
            const container = document.getElementById('slider-container-' + uid);
            const track = document.getElementById('track-' + uid);
            const addBtn = document.getElementById('add-client-' + uid);
            const nextBtn = document.getElementById('next-btn-' + uid);
            const prevBtn = document.getElementById('prev-btn-' + uid);
            
            let autoScrollInterval;
            const SCROLL_DELAY = 5000;
            let isAnimating = false;

            // --- ØªÙˆØ§Ø¨Ø¹ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ ---

            if (addBtn) {
                addBtn.addEventListener('click', () => {
                    addClientCard();
                });
            }

            function addClientCard() {
                const card = document.createElement('div');
                card.className = 'client-card';
                card.innerHTML = `
                    <div class="client-logo-wrapper" title="ØªØºÛŒÛŒØ± Ù„ÙˆÚ¯Ùˆ">
                        <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text x='50' y='50' text-anchor='middle' dominant-baseline='middle' fill='%23aaa' font-size='14'>LOGO</text></svg>" class="client-img" alt="Client Logo">
                        <div class="upload-overlay"><i class="fas fa-camera"></i></div>
                        <input type="file" accept="image/*" class="client-file-input" style="display: none;">
                    </div>
                    <h4 contenteditable="true" class="client-name">Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ</h4>
                    <button class="btn-delete-client" title="Ø­Ø°Ù">&times;</button>
                `;
                track.appendChild(card);
                setupCardEvents(card);
                
                const fileInput = card.querySelector('.client-file-input');
                setTimeout(() => fileInput.click(), 100);
            }

            function setupCardEvents(card) {
                const logoWrapper = card.querySelector('.client-logo-wrapper');
                const fileInput = card.querySelector('.client-file-input');
                const img = card.querySelector('.client-img');
                const deleteBtn = card.querySelector('.btn-delete-client');

                logoWrapper.addEventListener('click', () => fileInput.click());
                
                fileInput.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        if (typeof window.compressImageWithSizeControl === 'function') {
                            window.compressImageWithSizeControl(file, { 
                                maxSize: 300, 
                                quality: 0.8, 
                                maxFileSize: 50 * 1024 
                            }, (url) => {
                                img.src = url;
                                if (typeof window.storeUploadedFile === 'function') {
                                    window.storeUploadedFile('client-logo-' + Date.now(), file.name, url, file.type);
                                }
                            });
                        } else {
                            const reader = new FileReader();
                            reader.onload = (ev) => img.src = ev.target.result;
                            reader.readAsDataURL(file);
                        }
                    }
                    e.target.value = '';
                });

                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    if(confirm('Ø¢ÛŒØ§ Ø§ÛŒÙ† Ù…Ø´ØªØ±ÛŒ Ø­Ø°Ù Ø´ÙˆØ¯ØŸ')) card.remove();
                });
                
                card.addEventListener('mouseenter', stopAutoScroll);
                card.addEventListener('mouseleave', startAutoScroll);
            }

            // --- Ù…Ù†Ø·Ù‚ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ø¨ÛŒâ€ŒÙ¾Ø§ÛŒØ§Ù† (DOM Loop) ---

            function startAutoScroll() {
                stopAutoScroll();
                autoScrollInterval = setInterval(() => slide('next'), SCROLL_DELAY);
            }

            function stopAutoScroll() {
                if (autoScrollInterval) clearInterval(autoScrollInterval);
            }

            function slide(direction) {
                if (isAnimating || track.children.length < 2) return;
                isAnimating = true;

                const firstCard = track.firstElementChild;
                const lastCard = track.lastElementChild;
                const gap = 30; // ÙØ§ØµÙ„Ù‡ Ø¨ÛŒÙ† Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¯Ø± CSS
                const cardWidth = firstCard.offsetWidth + gap;
                const isRTL = document.documentElement.dir === 'rtl';

                // Ø¯Ø± RTL Ø¬Ù‡Øªâ€ŒÙ‡Ø§ Ù…Ø¹Ú©ÙˆØ³ Ø§Ø³Øª: 
                // Ø¨Ø±Ø§ÛŒ Next (Ø±ÙØªÙ† Ø¨Ù‡ Ø¢ÛŒØªÙ… Ø¨Ø¹Ø¯ÛŒ)ØŒ Ø¨Ø§ÛŒØ¯ ØªØ±Ú© Ø¨Ù‡ Ø±Ø§Ø³Øª Ø¨Ø±ÙˆØ¯ (Ù…Ø«Ø¨Øª)
                // Ø¨Ø±Ø§ÛŒ Prev (Ø±ÙØªÙ† Ø¨Ù‡ Ø¢ÛŒØªÙ… Ù‚Ø¨Ù„ÛŒ)ØŒ Ø¨Ø§ÛŒØ¯ ØªØ±Ú© Ø¨Ù‡ Ú†Ù¾ Ø¨Ø±ÙˆØ¯ (Ù…Ù†ÙÛŒ)
                
                // Ø¯Ø± LTR:
                // Next -> translateX(-cardWidth)
                // Prev -> translateX(cardWidth)

                let translateVal;
                if (isRTL) {
                    translateVal = (direction === 'next') ? cardWidth : -cardWidth;
                } else {
                    translateVal = (direction === 'next') ? -cardWidth : cardWidth;
                }

                if (direction === 'next') {
                    // Ø­Ø±Ú©Øª Ø¨Ù‡ Ø¬Ù„Ùˆ
                    track.style.transition = 'transform 0.5s ease-in-out';
                    track.style.transform = `translateX(${translateVal}px)`;

                    setTimeout(() => {
                        track.style.transition = 'none';
                        track.appendChild(firstCard); // Ø§Ù†ØªÙ‚Ø§Ù„ Ø§ÙˆÙ„ÛŒ Ø¨Ù‡ Ø¢Ø®Ø±
                        track.style.transform = 'translateX(0)';
                        isAnimating = false;
                    }, 500);

                } else {
                    // Ø­Ø±Ú©Øª Ø¨Ù‡ Ø¹Ù‚Ø¨
                    // Ø¨Ø±Ø§ÛŒ Ø­Ø±Ú©Øª Ù†Ø±Ù… Ø¨Ù‡ Ø¹Ù‚Ø¨ØŒ Ø§Ø¨ØªØ¯Ø§ Ø¢Ø®Ø±ÛŒ Ø±Ø§ Ø¨Ù‡ Ø§ÙˆÙ„ Ù…ÛŒâ€ŒØ¢ÙˆØ±ÛŒÙ… Ùˆ Ø¢ÙØ³Øª Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ…
                    // Ø³Ù¾Ø³ Ø¨Ø§ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ù‡ ØµÙØ± Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯ÛŒÙ…
                    
                    track.style.transition = 'none';
                    track.insertBefore(lastCard, firstCard); // Ø§Ù†ØªÙ‚Ø§Ù„ Ø¢Ø®Ø±ÛŒ Ø¨Ù‡ Ø§ÙˆÙ„
                    
                    // Ø¢ÙØ³Øª Ø§ÙˆÙ„ÛŒÙ‡ (Ø¨Ø±Ø¹Ú©Ø³ Ø­Ø±Ú©Øª)
                    track.style.transform = `translateX(${-translateVal}px)`;
                    
                    // Ø§Ø¬Ø¨Ø§Ø± Ø¨Ù‡ Ø±Ù†Ø¯Ø± (Reflow)
                    void track.offsetWidth;

                    track.style.transition = 'transform 0.5s ease-in-out';
                    track.style.transform = 'translateX(0)';

                    setTimeout(() => {
                        isAnimating = false;
                    }, 500);
                }
            }

            nextBtn.addEventListener('click', () => {
                slide('next');
                startAutoScroll();
            });

            prevBtn.addEventListener('click', () => {
                slide('prev');
                startAutoScroll();
            });

            // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
            track.querySelectorAll('.client-card').forEach(setupCardEvents);
            startAutoScroll();

        })();
    </script>
</section>